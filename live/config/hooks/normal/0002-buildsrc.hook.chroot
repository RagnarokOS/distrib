#!/bin/sh

set -e

# Build from source
build_src() {
	export TOPDIR=/usr/src/ragnarok/src
	cd "${TOPDIR}" || exit
	make -C lib
	make -C bin
	make -C lib install
	make -C bin install

	# Cleanup.
	rm -r "${TOPDIR}"
}

# Build dwm, rt and dmenu from one Makefile
build_x11() {
	cd /usr/src/ragnarok || exit
	make && make clean install && make clean
}

# build wmutils
build_wmu() {
	cd /usr/src/ragnarok/core || exit
	make && make install && make clean
}

build_src
build_x11
build_wmu
